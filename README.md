# Starlink - Qwen-Omni å®æ—¶è¯­éŸ³å¯¹è¯ç³»ç»Ÿ

<div align="center">

![Next.js](https://img.shields.io/badge/Next.js-14.0-black)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)
![React](https://img.shields.io/badge/React-18-blue)
![License](https://img.shields.io/badge/license-MIT-green)

**åŸºäºé˜¿é‡Œäº‘ç™¾ç‚¼ Qwen-Omni-Realtime çš„å®Œæ•´ VAD æ¨¡å¼å®æ—¶è¯­éŸ³å¯¹è¯ç³»ç»Ÿ**

[å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [æ–‡æ¡£](#æ–‡æ¡£) â€¢ [æ¼”ç¤º](#æ¼”ç¤º)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

Starlink æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€ç”Ÿäº§å°±ç»ªçš„å®æ—¶è¯­éŸ³å¯¹è¯ç³»ç»Ÿï¼Œé‡‡ç”¨**æœåŠ¡ç«¯ VADï¼ˆVoice Activity Detectionï¼‰æ¨¡å¼**ï¼Œå®ç°äº†ä¸ AI çš„è‡ªç„¶ã€æµç•…å¯¹è¯ä½“éªŒã€‚

### æ ¸å¿ƒäº®ç‚¹

- ğŸ¤ **è‡ªåŠ¨è¯­éŸ³æ£€æµ‹** - æ— éœ€æŒ‰é”®ï¼Œè‡ªåŠ¨æ£€æµ‹è¯­éŸ³å¼€å§‹/ç»“æŸ
- ğŸ’¬ **å®æ—¶æµå¼ä¼ è¾“** - éŸ³é¢‘å’Œæ–‡å­—åŒæ­¥æµå¼æ’­æ”¾
- ğŸ’¥ **æ™ºèƒ½æ‰“æ–­** - éšæ—¶æ‰“æ–­ AI å›å¤ï¼Œç«‹å³å“åº”
- âš¡ **è¶…ä½å»¶è¿Ÿ** - ç«¯åˆ°ç«¯å»¶è¿Ÿ < 2 ç§’
- ğŸ¯ **ç”Ÿäº§å°±ç»ª** - å®Œå–„çš„é”™è¯¯å¤„ç†ã€çŠ¶æ€ç®¡ç†å’Œç”¨æˆ·å¼•å¯¼

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js 18+
- æ”¯æŒ WebRTC çš„æµè§ˆå™¨ï¼ˆChrome, Firefox, Edge, Safariï¼‰
- é˜¿é‡Œäº‘ç™¾ç‚¼ API Key

### å®‰è£…å’Œè¿è¡Œ

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-org/starlink.git
cd starlink

# 2. å®‰è£…ä¾èµ–
npm install

# 3. é…ç½® API Keyï¼ˆå¿…å¡«ï¼‰å’Œæ¨¡å‹ï¼ˆå¯é€‰ï¼‰
cat > .env.local << 'EOF'
NEXT_PUBLIC_DASHSCOPE_API_KEY=sk-your-api-key
# å¯é€‰ï¼šæŒ‡å®šå®æ—¶æ¨¡å‹ï¼ˆé»˜è®¤ qwen3-omni-flash-realtimeï¼‰
NEXT_PUBLIC_QWEN_MODEL=qwen3-omni-flash-realtime
EOF

# 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 5. è®¿é—®åº”ç”¨
# http://localhost:3000
```

### 5åˆ†é’Ÿå¿«é€Ÿä½“éªŒ

1. **è¯·æ±‚éº¦å…‹é£æƒé™** â†’ ç‚¹å‡»è“è‰²æŒ‰é’®ï¼Œå…è®¸æµè§ˆå™¨è®¿é—®éº¦å…‹é£
2. **æµ‹è¯• API è¿æ¥** â†’ ç¡®è®¤ WebSocket è¿æ¥æ­£å¸¸
3. **å¼€å§‹è¯­éŸ³** â†’ ç‚¹å‡»å¼€å§‹æŒ‰é’®
4. **å¼€å§‹å¯¹è¯** â†’ ç›´æ¥è¯´è¯ï¼ŒAI è‡ªåŠ¨å“åº”
5. **äº«å—ä½“éªŒ** â†’ æ”¯æŒå¤šè½®å¯¹è¯å’Œæ™ºèƒ½æ‰“æ–­

è¯¦ç»†æ­¥éª¤è¯·æŸ¥çœ‹ [å¿«é€Ÿå¼€å§‹æŒ‡å—](./QUICK_START.md)

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

#### ğŸ™ï¸ VAD è‡ªåŠ¨è¯­éŸ³æ£€æµ‹
- âœ… æœåŠ¡ç«¯ VADï¼Œæ— éœ€å®¢æˆ·ç«¯å®ç°
- âœ… è‡ªåŠ¨æ£€æµ‹è¯­éŸ³å¼€å§‹/ç»“æŸ
- âœ… è‡ªåŠ¨æäº¤éŸ³é¢‘ç¼“å†²åŒº
- âœ… è‡ªåŠ¨ç”Ÿæˆ AI å“åº”

#### ğŸ’¥ æ™ºèƒ½æ‰“æ–­å¤„ç†
- âœ… åœ¨ AI è¯´è¯æ—¶éšæ—¶æ‰“æ–­
- âœ… è‡ªåŠ¨å–æ¶ˆå½“å‰å›å¤
- âœ… ç«‹å³å¤„ç†æ–°çš„ç”¨æˆ·è¾“å…¥
- âœ… æ— æ„ŸçŸ¥çš„æµç•…ä½“éªŒ

#### âš¡ å®æ—¶æµå¼ä¼ è¾“
- âœ… éŸ³é¢‘æµå¼æ’­æ”¾ï¼ˆPCM24, 24kHzï¼‰
- âœ… æ–‡å­—æµå¼æ˜¾ç¤º
- âœ… éŸ³é¢‘å’Œæ–‡å­—å¹¶è¡Œä¼ è¾“
- âœ… æ— é—´éš™æ’­æ”¾é˜Ÿåˆ—

#### ğŸ¯ å®Œå–„çš„ç”¨æˆ·ä½“éªŒ
- âœ… 3æ­¥å¼å¼•å¯¼æµç¨‹
- âœ… å®æ—¶çŠ¶æ€æŒ‡ç¤ºï¼ˆç›‘å¬ä¸­/å¤„ç†ä¸­/æ’­æ”¾ä¸­ï¼‰
- âœ… VAD æ¨¡å¼å¯è§†åŒ–å¾½ç« 
- âœ… éŸ³é¢‘ç”µå¹³å¯è§†åŒ–
- âœ… å¯¹è¯å†å²è®°å½•
- âœ… éŸ³é‡æ§åˆ¶
- âœ… å“åº”å¼è®¾è®¡

#### ğŸ›¡ï¸ å®Œå–„çš„é”™è¯¯å¤„ç†
- âœ… éº¦å…‹é£æƒé™é”™è¯¯
- âœ… ç½‘ç»œè¿æ¥é”™è¯¯
- âœ… API Key éªŒè¯é”™è¯¯
- âœ… æµè§ˆå™¨å…¼å®¹æ€§æ£€æŸ¥
- âœ… å‹å¥½çš„é”™è¯¯æç¤ºå’Œé‡è¯•æœºåˆ¶

### æŠ€æœ¯å®ç°

#### éŸ³é¢‘å¤„ç†
- **é‡‡é›†**: 16kHz, å•å£°é“, PCM16
- **ç¼–ç **: PCM16 â†’ Base64
- **è§£ç **: PCM24 â†’ Float32Array â†’ AudioBuffer
- **æ’­æ”¾**: 24kHz, å•å£°é“, è‡ªåŠ¨é˜Ÿåˆ—ç®¡ç†

#### WebSocket é€šä¿¡
- **åè®®**: WSS (TLS 1.2+)
- **è®¤è¯**: Bearer Token (API Key)
- **äº‹ä»¶**: å®Œæ•´çš„åŒå‘äº‹ä»¶æµ
- **å¿ƒè·³**: 30ç§’ä¿æ´»æœºåˆ¶

#### çŠ¶æ€ç®¡ç†
- **è¿æ¥çŠ¶æ€**: disconnected | connecting | connected | error
- **åº”ç”¨çŠ¶æ€**: idle | listening | processing | speaking
- **æƒé™çŠ¶æ€**: not_requested | requesting | granted | denied
- **æµ‹è¯•çŠ¶æ€**: not_tested | testing | success | failed

---

## ğŸ“š æ–‡æ¡£

### æ ¸å¿ƒæ–‡æ¡£

- ğŸ“– [å¿«é€Ÿå¼€å§‹æŒ‡å—](./QUICK_START.md) - 5åˆ†é’Ÿå¿«é€Ÿä½“éªŒ
- ğŸ“˜ [å®Œæ•´å®ç°æ–‡æ¡£](./VAD_WORKFLOW_IMPLEMENTATION.md) - VAD å·¥ä½œæµè¯¦ç»†è¯´æ˜
- âœ… [æµ‹è¯•æŒ‡å—](./TESTING_GUIDE.md) - å®Œæ•´çš„æµ‹è¯•æ£€æŸ¥è¡¨
- ğŸ”§ [é›†æˆæŒ‡å—](./INTEGRATION_GUIDE.md) - å¦‚ä½•é›†æˆåˆ°ä½ çš„é¡¹ç›®

### API æ–‡æ¡£

- ğŸ“Š [Qwen-Omni API æ–‡æ¡£](./QWEN_OMNI_README.md) - API å‚è€ƒ
- ğŸ“ [äº‹ä»¶ç³»ç»Ÿå®ç°](./QWEN_OMNI_EVENTS_IMPLEMENTATION.md) - äº‹ä»¶å¤„ç†è¯¦è§£
- ğŸ¤ [éŸ³é¢‘é‡‡é›†å®ç°](./AUDIO_CAPTURE_IMPLEMENTATION.md) - éŸ³é¢‘å¤„ç†è¯¦è§£

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
starlink/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ OmniChat.tsx              # ä¸»UIç»„ä»¶
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ qwen-omni-client.ts       # WebSocketå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ test-connection.ts        # è¿æ¥æµ‹è¯•å·¥å…·
â”‚   â”œâ”€â”€ constants.ts              # é…ç½®å¸¸é‡
â”‚   â”œâ”€â”€ utils.ts                  # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ audio/
â”‚       â”œâ”€â”€ audio-processor.ts    # éŸ³é¢‘é‡‡é›†
â”‚       â”œâ”€â”€ audio-player.ts       # éŸ³é¢‘æ’­æ”¾
â”‚       â”œâ”€â”€ pcm-decoder.ts        # PCMè§£ç 
â”‚       â”œâ”€â”€ pcm-encoder.ts        # PCMç¼–ç 
â”‚       â””â”€â”€ microphone-permission.ts  # æƒé™ç®¡ç†
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ index.tsx                 # é¦–é¡µ
â”‚   â””â”€â”€ api/                      # APIè·¯ç”±
â”œâ”€â”€ styles/
â”‚   â””â”€â”€ globals.css               # å…¨å±€æ ·å¼
â”œâ”€â”€ .env.local                    # ç¯å¢ƒå˜é‡ï¼ˆéœ€è¦åˆ›å»ºï¼‰
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ next.config.js
```

---

## ğŸ¬ æ¼”ç¤º

### å·¥ä½œæµç¨‹

```
1ï¸âƒ£ è¯·æ±‚éº¦å…‹é£æƒé™
   â†“
2ï¸âƒ£ æµ‹è¯• API è¿æ¥
   â†“
3ï¸âƒ£ å¼€å§‹è¯­éŸ³ä¼šè¯
   â†“
4ï¸âƒ£ è¯´è¯ â†’ VAD è‡ªåŠ¨æ£€æµ‹
   â†“
5ï¸âƒ£ AI è‡ªåŠ¨ç”Ÿæˆå›å¤
   â†“
6ï¸âƒ£ å®æ—¶æ’­æ”¾éŸ³é¢‘ + æ˜¾ç¤ºæ–‡å­—
   â†“
7ï¸âƒ£ ç»§ç»­å¯¹è¯ï¼ˆå›åˆ°æ­¥éª¤ 4ï¼‰
```

### å¯¹è¯ç¤ºä¾‹

```typescript
ç”¨æˆ·: "ä½ å¥½"
AI:   "ä½ å¥½å‘€ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®ä½ çš„å—ï¼Ÿ"

ç”¨æˆ·: "ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"
AI:   "æŠ±æ­‰ï¼Œæˆ‘æ— æ³•å®æ—¶è·å–å¤©æ°”ä¿¡æ¯..."

ç”¨æˆ·: "ç»™æˆ‘è®²ä¸ªç¬‘è¯"ï¼ˆåœ¨ AI è¯´è¯æ—¶æ‰“æ–­ï¼‰
AI:   [åœæ­¢å‰ä¸€ä¸ªå›å¤ï¼Œç«‹å³å“åº”]
      "å¥½çš„ï¼æœ‰ä¸€ä¸ªç¨‹åºå‘˜å»é¢è¯•..."
```

---

## ğŸ”§ å¼€å‘

### å¯ç”¨å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start

# ç±»å‹æ£€æŸ¥
npm run type-check

# ä»£ç æ ¼å¼åŒ–
npm run format

# è¿è¡Œæµ‹è¯•
npm test
```

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```bash
# å¿…éœ€
NEXT_PUBLIC_DASHSCOPE_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# å¯é€‰ï¼ˆç”¨äºæœåŠ¡ç«¯ï¼‰
DASHSCOPE_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### æµè§ˆå™¨æ”¯æŒ

| æµè§ˆå™¨ | æœ€ä½ç‰ˆæœ¬ | æ¨èç‰ˆæœ¬ |
|--------|----------|----------|
| Chrome | 90+ | 120+ |
| Firefox | 88+ | 120+ |
| Edge | 90+ | 120+ |
| Safari | 14+ | 17+ |

---

## ğŸ§ª æµ‹è¯•

### è‡ªåŠ¨åŒ–æµ‹è¯•

```bash
# ç±»å‹æ£€æŸ¥
npm run type-check

# æ„å»ºæµ‹è¯•
npm run build

# å•å…ƒæµ‹è¯•ï¼ˆå¦‚æœæœ‰ï¼‰
npm test
```

### æ‰‹åŠ¨æµ‹è¯•

ä½¿ç”¨ [æµ‹è¯•æŒ‡å—](./TESTING_GUIDE.md) ä¸­çš„å®Œæ•´æ£€æŸ¥è¡¨è¿›è¡Œæ‰‹åŠ¨æµ‹è¯•ï¼š

- âœ… æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•
- âœ… éº¦å…‹é£æƒé™æµ‹è¯•
- âœ… API è¿æ¥æµ‹è¯•
- âœ… VAD å·¥ä½œæµæµ‹è¯•
- âœ… æ‰“æ–­åŠŸèƒ½æµ‹è¯•
- âœ… é”™è¯¯å¤„ç†æµ‹è¯•
- âœ… UI/UX æµ‹è¯•
- âœ… æ€§èƒ½æµ‹è¯•

---

## ğŸ“Š æŠ€æœ¯æ ˆ

### å‰ç«¯æ¡†æ¶
- **Next.js 14** - React æ¡†æ¶ï¼ˆPages Routerï¼‰
- **React 18** - UI åº“
- **TypeScript 5** - ç±»å‹å®‰å…¨

### UI åº“
- **Tailwind CSS** - æ ·å¼æ¡†æ¶
- **lucide-react** - å›¾æ ‡åº“

### éŸ³é¢‘å¤„ç†
- **Web Audio API** - éŸ³é¢‘é‡‡é›†å’Œæ’­æ”¾
- **MediaStream API** - éº¦å…‹é£è®¿é—®
- **AudioContext** - éŸ³é¢‘å¤„ç†

### WebSocket
- **åŸç”Ÿ WebSocket API** - å®æ—¶é€šä¿¡

### API
- **é˜¿é‡Œäº‘ç™¾ç‚¼** - Qwen-Omni-Realtime
- **gummy-realtime-v1** - ASR æ¨¡å‹
- **Qwen3-omni-flash-realtime** - å¯¹è¯æ¨¡å‹

---

## ğŸš€ éƒ¨ç½²

### Vercelï¼ˆæ¨èï¼‰

```bash
# 1. å®‰è£… Vercel CLI
npm i -g vercel

# 2. ç™»å½•
vercel login

# 3. éƒ¨ç½²
vercel

# 4. è®¾ç½®ç¯å¢ƒå˜é‡
vercel env add NEXT_PUBLIC_DASHSCOPE_API_KEY
```

### å…¶ä»–å¹³å°

- **Netlify**: æ”¯æŒï¼Œéœ€è¦é…ç½®ç¯å¢ƒå˜é‡
- **è‡ªæ‰˜ç®¡**: éœ€è¦ Node.js 18+ å’Œ HTTPS

---

## ğŸ” å®‰å…¨æ€§

### API Key å®‰å…¨
- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨
- âœ… ä¸æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- âœ… å®¢æˆ·ç«¯ä½¿ç”¨ `NEXT_PUBLIC_` å‰ç¼€

### ç½‘ç»œå®‰å…¨
- âœ… WSS (WebSocket Secure)
- âœ… HTTPS å¼ºåˆ¶è¦æ±‚
- âœ… Bearer Token è®¤è¯

### æµè§ˆå™¨å®‰å…¨
- âœ… getUserMedia éœ€è¦ç”¨æˆ·æˆæƒ
- âœ… åŒæºç­–ç•¥
- âœ… CSP (Content Security Policy)

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](./CONTRIBUTING.md)ã€‚

### å¼€å‘æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. æäº¤ Pull Request

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-12-17)

- âœ… å®Œæ•´å®ç° VAD æ¨¡å¼å·¥ä½œæµ
- âœ… è‡ªåŠ¨è¯­éŸ³æ£€æµ‹å’Œå“åº”ç”Ÿæˆ
- âœ… æ™ºèƒ½æ‰“æ–­å¤„ç†
- âœ… å®æ—¶æµå¼éŸ³é¢‘æ’­æ”¾
- âœ… å®æ—¶æ–‡æœ¬è½¬å½•æ˜¾ç¤º
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·å¼•å¯¼
- âœ… SSR å…¼å®¹æ€§ä¿®å¤
- âœ… ç”Ÿäº§ç¯å¢ƒå°±ç»ª

---

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](./LICENSE) æ–‡ä»¶

---

## ğŸ™ è‡´è°¢

- [é˜¿é‡Œäº‘ç™¾ç‚¼](https://bailian.console.aliyun.com/) - æä¾› Qwen-Omni-Realtime API
- [Next.js](https://nextjs.org/) - React æ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com/) - CSS æ¡†æ¶
- [lucide-react](https://lucide.dev/) - å›¾æ ‡åº“

---

## ğŸ“§ è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: https://github.com/your-org/starlink
- é—®é¢˜åé¦ˆ: https://github.com/your-org/starlink/issues
- é‚®ä»¶: your-email@example.com

---

<div align="center">

**[â¬† å›åˆ°é¡¶éƒ¨](#starlink---qwen-omni-å®æ—¶è¯­éŸ³å¯¹è¯ç³»ç»Ÿ)**

Made with â¤ï¸ by Starlink Team

</div>
