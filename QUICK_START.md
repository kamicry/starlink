# 快速开始指南

## 🚀 5分钟快速体验 VAD 模式实时语音对话

### 前置要求

- ✅ Node.js 18+ 已安装
- ✅ 浏览器支持 WebRTC (Chrome, Firefox, Edge, Safari)
- ✅ 麦克风设备
- ✅ 阿里云百炼 API Key

### 第 1 步：安装依赖

```bash
npm install
```

### 第 2 步：配置 API Key

创建 `.env.local` 文件：

```bash
NEXT_PUBLIC_DASHSCOPE_API_KEY=sk-your-api-key-here
```

> 💡 获取 API Key: https://bailian.console.aliyun.com/

### 第 3 步：启动开发服务器

```bash
npm run dev
```

访问: http://localhost:3000

### 第 4 步：开始使用

#### 步骤 1️⃣: 请求麦克风权限

点击蓝色按钮 **"请求麦克风权限"**

在浏览器弹窗中选择 **"允许"**

✅ 看到绿色提示 "麦克风已就绪"

#### 步骤 2️⃣: 测试 API 连接

点击绿色按钮 **"测试 API 连接"**

等待 2-3 秒

✅ 看到 "API 连接正常" 和延迟信息

#### 步骤 3️⃣: 开始语音对话

点击蓝色按钮 **"开始语音"**

等待状态变为 **"监听中"** （红色脉冲动画）

看到 **"VAD 模式 (自动检测)"** 紫色徽章

#### 步骤 4️⃣: 和 AI 对话

🎤 **对着麦克风说话**：
```
"你好"
"今天天气怎么样？"
"给我讲个笑话"
```

🔊 **听 AI 的回复**：
- 音频自动播放
- 文字实时显示

💬 **继续对话**：
- 无需点击任何按钮
- VAD 自动检测你的声音
- 可以打断 AI 的回复

#### 步骤 5️⃣: 停止对话

点击红色按钮 **"停止语音"**

---

## 🎯 核心特性

### ✨ VAD 自动语音检测
- 🚫 无需按键说话
- 🚫 无需手动提交
- ✅ 自动检测语音开始/结束
- ✅ 自动生成 AI 回复

### 💥 智能打断
- 在 AI 说话时直接开始说话
- AI 自动停止，立即处理你的新问题

### ⚡ 实时体验
- 音频和文字同时流式传输
- 延迟 < 2 秒
- 无间隙播放

### 🎨 友好界面
- 实时状态指示
- 音频电平可视化
- 对话历史记录
- 音量控制

---

## 🛠️ 开发命令

```bash
# 开发模式
npm run dev

# 生产构建
npm run build

# 启动生产服务器
npm start

# 类型检查
npm run type-check

# 代码格式化
npm run format
```

---

## 📊 系统要求

### 浏览器支持
- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Edge 90+
- ✅ Safari 14+

### 网络要求
- ✅ HTTPS 或 localhost (getUserMedia 要求)
- ✅ WebSocket 支持
- ✅ 稳定的网络连接

### 硬件要求
- ✅ 麦克风设备
- ✅ 扬声器/耳机
- 💻 2GB+ 可用内存

---

## 🔧 故障排除

### 问题：麦克风权限被拒绝

**解决方法：**
1. 点击浏览器地址栏左侧的锁图标
2. 找到"麦克风"设置
3. 选择"允许"
4. 刷新页面
5. 重新点击"请求麦克风权限"

### 问题：API 连接失败

**检查：**
- ✅ `.env.local` 文件存在
- ✅ API Key 格式正确 (sk-开头)
- ✅ API Key 有效且有配额
- ✅ 网络连接正常

**解决方法：**
```bash
# 检查 API Key
cat .env.local

# 确认格式
NEXT_PUBLIC_DASHSCOPE_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### 问题：听不到 AI 的声音

**检查：**
1. 音量滑块是否调整到合适位置
2. 系统音量是否开启
3. 浏览器标签页是否静音
4. 是否连接了扬声器/耳机

### 问题：VAD 不检测我的声音

**检查：**
1. 麦克风音量条是否有反应
2. 麦克风是否正常工作（测试其他应用）
3. 环境是否太吵（背景噪音）
4. 说话声音是否足够大

---

## 📚 更多文档

- 📖 [完整实现文档](./VAD_WORKFLOW_IMPLEMENTATION.md)
- ✅ [测试指南](./TESTING_GUIDE.md)
- 🔧 [集成指南](./INTEGRATION_GUIDE.md)
- 📊 [API 文档](./QWEN_OMNI_README.md)

---

## 💡 使用技巧

### 1. 获得最佳体验

- 🎤 使用质量好的麦克风
- 🔇 在安静的环境中使用
- 💻 使用最新版本的 Chrome
- 🎧 使用耳机（避免回音）

### 2. 提高响应速度

- 📍 选择离你近的服务区域
- 🌐 使用稳定的网络连接
- 💾 关闭其他占用带宽的应用

### 3. 更自然的对话

- 🗣️ 说话清晰、语速适中
- ⏸️ 说完等待约 1 秒（VAD 检测停顿）
- 🔄 可以随时打断 AI
- 💬 像和真人对话一样自然交流

---

## 🎬 示例对话

```
你: "你好"
AI: "你好呀！有什么我可以帮你的吗？"

你: "今天天气怎么样？"
AI: "抱歉，我无法实时获取天气信息。你可以告诉我你所在的城市，我可以给你一些建议。"

你: "给我讲个笑话"
AI: "好的！有一个程序员去面试，面试官问：你有女朋友吗？程序员回答：有对象。面试官：哦，那挺好的。程序员：但是null。"

你: "哈哈，再讲一个"
AI: "好的！为什么程序员总是混淆圣诞节和万圣节？因为 Oct 31 == Dec 25！"
```

---

## 🤝 获取帮助

遇到问题？

1. 📖 查看 [故障排除](#🔧-故障排除)
2. 📚 阅读 [完整文档](./VAD_WORKFLOW_IMPLEMENTATION.md)
3. 🐛 查看浏览器控制台错误信息
4. 💻 检查开发环境调试面板

---

## 🎉 准备好了吗？

现在就开始体验 AI 实时语音对话吧！

```bash
npm run dev
```

访问 http://localhost:3000 🚀

---

**享受与 AI 的自然对话体验！** 🎙️✨
